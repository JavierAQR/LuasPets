<app-nav></app-nav>
<main>
  <h2>Gestión de Usuarios</h2>
  <button class="btn btn-primary mb-3" (click)="showAddFoodForm()">Agregar Usuario</button>
  <div *ngIf="selectedUser || showAddForm" class="mt-4">
    <h3 *ngIf="selectedUser">Editar Usuario</h3>
    <h3 *ngIf="showAddForm && !selectedUser">Agregar Usuario</h3>
    <form [formGroup]="userForm" (ngSubmit)="selectedUser ? updateUser() : registerUser()" class="border p-4 rounded bg-light">
    <div class="mb-3">
      <label class="form-label">Nombre Completo:</label>
      <input formControlName="fullName" class="form-control" required />
    </div>
    <div class="mb-3">
      <label class="form-label">Email:</label>
      <input formControlName="username" class="form-control" required />
    </div>
    <div class="mb-3">
      <label class="form-label">DNI:</label>
      <input formControlName="email" class="form-control" required />
    </div>
    <div class="mb-3">
      <label class="form-label">Dirección:</label>
      <input formControlName="address" class="form-control" required />
    </div>
    <div class="mb-3">
      <label class="form-label">Teléfono:</label>
      <input formControlName="phoneNumber" class="form-control" required />
    </div>
    <div class="mb-3">
      <label class="form-label">Password:</label>
      <input formControlName="password" class="form-control" required />
    </div>
    <div class="mb-3">
      <label class="form-label">Rol:</label>
      <input formControlName="role" class="form-control" required />
    </div>
    <button type="submit" class="btn btn-success">{{ selectedUser ? 'Actualizar' : 'Agregar' }}</button>

    <button type="button" (click)="cancel()" class="btn btn-secondary">Cancelar</button>
  </form>
  </div>
  <table class="table table-striped table-bordered">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Correo Electrónico</th>
        <th>Nombre Completo</th>
        <th>DNI</th>
        <th>Dirección</th>
        <th>Teléfono</th>
        <th>Rol</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of users">
        <td>{{ user.id }}</td>
        <td>{{ user.username }}</td>
        <td>{{ user.fullName }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.address }}</td>
        <td>{{ user.phoneNumber }}</td>
        <td>{{ user.role }}</td>
        <td>
          <a (click)="editUser(user)" type="button" class="btn btn-primary"
            >Editar</a
          >
          <a (click)="deleteUser(user.id)" class="btn btn-danger">Eliminar</a>
        </td>
      </tr>
    </tbody>
  </table>
</main>
