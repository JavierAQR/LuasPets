<app-nav></app-nav>
<main style="margin-left: 320px;">
    <h1 style="padding-top: 20px;">Lista de Mascotas</h1>
    <button class="btn btn-primary mb-3" (click)="showAddPetForm()">Agregar Mascota</button>
    <div *ngIf="selectedPet || showAddForm" class="mt-4">
      <h3 *ngIf="selectedPet">Editar Mascota</h3>
      <h3 *ngIf="showAddForm && !selectedPet">Agregar Mascota</h3>     
      <form [formGroup]="petForm" (ngSubmit)="savePet()" class="border p-4 rounded bg-light">
        <div class="mb-3">
          <label class="form-label">Nombre:</label>
          <input formControlName="name" class="form-control" required />
        </div>
        <div *ngIf="!selectedPet" class="mb-3">
          <label class="form-label">ID del propietario:</label>
          <input formControlName="userId" class="form-control" />
        </div>
        <div class="mb-3">
          <label class="form-label">Especie:</label>
          <input formControlName="species" class="form-control" required />
        </div>
        <div class="mb-3">
          <label class="form-label">Raza:</label>
          <input formControlName="breed" class="form-control" />
        </div>
        <div class="mb-3">
          <label class="form-label">Tamaño:</label>
          <input formControlName="size" class="form-control" />
        </div>
        <div class="mb-3">
          <label class="form-label">Peso (kg):</label>
          <input formControlName="weight" type="number" class="form-control" required />
        </div>
        <div class="mb-3">
          <label class="form-label">Edad (años):</label>
          <input formControlName="age" type="number" class="form-control" required />
        </div>
        <div class="mb-3">
          <label class="form-label">Género:</label>
          <input formControlName="gender" class="form-control" />
        </div>
        
  
        <button type="submit" class="btn btn-success" style="margin-right: 5px;">
          {{ selectedPet ? 'Actualizar' : 'Agregar' }}
        </button>
        <button type="button" (click)="cancel()" class="btn btn-secondary">Cancelar</button>
      </form>
    </div>
    
    <table class="table table-striped table-bordered mt-4">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Especie</th>
          <th>Raza</th>
          <th>Tamaño</th>
          <th>Peso (kg)</th>
          <th>Edad (años)</th>
          <th>Género</th>
          <th>Nombre del propietario</th>
          <th>ID del propietario</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let pet of pets">
          <td>{{ pet.id }}</td>
          <td>{{ pet.name }}</td>
          <td>{{ pet.species }}</td>
          <td>{{ pet.breed }}</td>
          <td>{{ pet.size }}</td>
          <td>{{ pet.weight }}</td>
          <td>{{ pet.age }}</td>
          <td>{{ pet.gender }}</td>
          <td>{{ pet.userName }}</td>
          <td>{{ pet.userId }}</td>
          <td>
            <button class="btn btn-warning btn-sm" (click)="editPet(pet)" style="margin-right: 5px;">Editar</button>
            <button class="btn btn-danger btn-sm" (click)="deletePet(pet.id!)">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </main>
